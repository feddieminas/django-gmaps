{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block content %}

<section class="section-container">
    <div class="row">
        <aside class="col-12 py-1 col-sm-4 col-md-3 col-lg-3">
            <form id="index-form" role="form" action="{% url 'index' %}" method="POST">
                {% csrf_token %}
                {{ filter_form | crispy }}
                <button type="submit" class="btn bg-primary btn-lg text-white my-2 btn-block">SUBMIT</button>
            </form>

            <section class="mt-3 mt-sm-3 pt-sm-1 ml-md-0 mt-md-4 pt-md-1 mt-lg-4 pt-lg-1">
                <div class="d-flex flex-wrap justify-content-around align-items-center" style="line-height:30px;font-size:14px;font-weight:100;max-height:180px;min-height:90px;">
                    <div class="clearfix d-inline-flex">
                        <p class="float-left"><img src="http://maps.google.com/mapfiles/ms/icons/blue-dot.png" height="30px" width="30px" border="1px"></p>
                        <p>Under Development</p>
                    </div>
                    <div class="clearfix d-inline-flex">
                        <p class="float-left"><img src="http://maps.google.com/mapfiles/ms/icons/green-dot.png" height="30px" width="30px" border="1px"></p>
                        <p>Under Construction</p>
                    </div>
                    <div class="clearfix d-inline-flex">
                        <p class="float-left"><img src="http://maps.google.com/mapfiles/ms/icons/yellow-dot.png" height="30px" width="30px" border="1px"></p>
                        <p>Real Time Bidding</p>
                    </div>
                    <div class="clearfix d-inline-flex">
                        <p class="float-left"><img src="http://maps.google.com/mapfiles/ms/icons/purple-dot.png" height="30px" width="30px" border="1px"></p>
                        <p>Cash on Delivery</p>
                    </div>
                </div>
            </section>

        </aside>
        <div class="col-12 py-0 py-sm-1 col-sm-8 col-md-9 pl-md-1 col-lg-9 pl-lg-1">
            <div id="map"></div>
        </div>
    </div>
</section>

{% endblock %}

{% block body_end_head %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-marker-clusterer/1.0.0/markerclusterer.js" integrity="sha256-GSfwQFuJ6wSbiAnsEJ7frIET2Nz0CbhWVw617kzHR0A=" crossorigin="anonymous"></script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key={{gm_key|safe}}&libraries=places&callback=initMap"></script>

<script>
let projects = {{projects|safe}};
let projectsLatLng = {{projectsLatLng|safe}};
let map;
let markers = new Array();
const urlPost = "{% url 'index' %}";
</script>
{% endblock %}